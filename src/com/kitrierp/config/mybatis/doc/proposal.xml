<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.kitrierp.doc.model.ProposalDaoImpl">
    <select id="view" parameterType="String" resultType="docdto">
        select d.doc_id, d.doc_status_id, d.emp_id, d.doc_type_id, d.doc_subject,
                d.doc_content, d.doc_date, d.doc_deadline, d.doc_open, d.doc_dep_id,
                d.doc_note, dt.doc_type_name, ds.doc_status_name,
                e.emp_name, dp.dep_name
        from document d, employee e, department dp, doc_type dt, doc_status ds
        where d.emp_id = e.emp_id
        and e.dep_id = dp.dep_id
        and d.doc_type_id = dt.doc_type_id
        and d.doc_status_id = ds.doc_status_id
        and d.doc_id = #{doc_id}
    </select>
    <select id="view_sign_info" parameterType="String" resultType="sidto">
        select * from sign_info where doc_id = #{doc_id}
    </select>
    <select id="view_reference" parameterType="String" resultType="refdto">
        select * from reference where doc_id = #{doc_id}
    </select>
    <select id="view_cooperation" parameterType="String" resultType="coopdto">
        select * from cooperation where doc_id = #{doc_id}
    </select>
</mapper>
